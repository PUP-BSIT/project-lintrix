<div class="header">
  <div class="logo">GRADEMATE</div>
  <div class="university-name">UNIVERSITY NAME</div>
  <div class="user-info">
    <span>JOHN DOE</span>
    <div class="profile-pic"></div>
  </div>
</div>
<div class="container">
  <div class="sidebar">
    <div class="menu-item active" (click)="selectMenu('home')">Home</div>
    <div class="menu-item">
      <span (click)="toggleDropdown('courses')">Courses</span>
      <span class="dropdown-button" (click)="toggleDropdown('courses')">â–¼</span>
    </div>
    <div *ngIf="dropdowns['courses']" class="submenu">
      <div class="submenu-item" (click)="selectSubMenu('list-courses')">List of subjects/courses</div>
      <div class="submenu-item" (click)="selectSubMenu('view-course-details')">View subject/course details</div>
    </div>
    <div class="menu-item" (click)="selectMenu('input-grades')">Grade Entry</div>
    <div class="menu-item" (click)="selectMenu('account')">Account</div>
    <div class="menu-item" (click)="selectMenu('notifications')">Notifications</div>
    <div class="menu-item" (click)="selectMenu('settings')">Settings</div>
  </div>
  <div class="content">
    <ng-container *ngIf="selectedMenu || selectedSubMenu">
      <!-- List Courses Submenu -->
      <div *ngIf="selectedSubMenu === 'list-courses'">
        <div *ngIf="isModalOpen" class="modal">
          <div class="modal-content">
            <span class="close" (click)="closeModal()">&times;</span>
            <form (submit)="addCourse()">
              <label for="courseName">Course Name:</label>
              <input id="courseName" [(ngModel)]="newCourseName" name="courseName" required />
              <button type="submit">Add Course</button>
            </form>
          </div>
        </div>
        <div *ngIf="isEditModalOpen" class="modal">
          <div class="modal-content">
            <span class="close" (click)="closeEditModal()">&times;</span>
            <form (submit)="updateCourse()">
              <label for="editCourseName">Edit Course Name:</label>
              <input id="editCourseName" [(ngModel)]="editCourseName" name="editCourseName" required />
              <button type="submit">Update Course</button>
            </form>
          </div>
        </div>
        <div *ngIf="isDeleteModalOpen" class="modal">
          <div class="modal-content">
            <span class="close" (click)="closeDeleteModal()">&times;</span>
            <p>Are you sure you want to delete this course?</p>
            <button (click)="confirmDelete()">Yes</button>
            <button (click)="closeDeleteModal()">No</button>
          </div>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Course Name</th>
                <th class="actions-column">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="add-new-link" (click)="openModal()">Add New</span></td>
                <td></td>
              </tr>
              <tr *ngFor="let course of courses; let i = index">
                <td>{{ course }}</td>
                <td>
                  <span class="edit-link" (click)="openEditModal(course, i)">Edit</span>
                  <span class="delete-link" (click)="openDeleteModal(i)">Delete</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- View Course Details Submenu -->
      <div *ngIf="selectedSubMenu === 'view-course-details'">
        <!-- This section is intentionally left empty -->
      </div>

      <!-- Input Grades Submenu -->
      <div *ngIf="selectedMenu === 'input-grades' && !selectedSubMenu">
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Assessment</th>
                <th>Grade</th>
                <th>Weight</th>
                <th>Total:</th>
                <th class="actions-column">Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Quizzes Section -->
              <tr>
                <td><span class="add-new-link" (click)="openAssessmentModal('Quiz')">Quizzes</span></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr *ngFor="let quiz of getAssessmentsByType('Quiz'); let i = index">
                <td>{{ quiz.name }}</td>
                <td>{{ quiz.grade }}</td>
                <td>{{ quiz.weight }}%</td>
                <td>{{ getWeightedGrade(quiz) }}</td>
                <td>
                  <span class="edit-link" (click)="openEditAssessmentModal(quiz, 'Quiz', i)">Edit</span>
                  <span class="delete-link" (click)="openDeleteAssessmentModal(quiz, 'Quiz', i)">Delete</span>
                </td>
              </tr>

              <!-- Activities Section -->
              <tr>
                <td><span class="add-new-link" (click)="openAssessmentModal('Activity')">Activities</span></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr *ngFor="let activity of getAssessmentsByType('Activity'); let i = index">
                <td>{{ activity.name }}</td>
                <td>{{ activity.grade }}</td>
                <td>{{ activity.weight }}%</td>
                <td>{{ getWeightedGrade(activity) }}</td>
                <td>
                  <span class="edit-link" (click)="openEditAssessmentModal(activity, 'Activity', i)">Edit</span>
                  <span class="delete-link" (click)="openDeleteAssessmentModal(activity, 'Activity', i)">Delete</span>
                </td>
              </tr>

              <!-- Exams Section -->
              <tr>
                <td><span class="add-new-link" (click)="openAssessmentModal('Exam')">Exams</span></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr *ngFor="let exam of getAssessmentsByType('Exam'); let i = index">
                <td>{{ exam.name }}</td>
                <td>{{ exam.grade }}</td>
                <td>{{ exam.weight }}%</td>
                <td>{{ getWeightedGrade(exam) }}</td>
                <td>
                  <span class="edit-link" (click)="openEditAssessmentModal(exam, 'Exam', i)">Edit</span>
                  <span class="delete-link" (click)="openDeleteAssessmentModal(exam, 'Exam', i)">Delete</span>
                </td>
              </tr>

              <!-- Projects Section -->
              <tr>
                <td><span class="add-new-link" (click)="openAssessmentModal('Project')">Projects</span></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr *ngFor="let project of getAssessmentsByType('Project'); let i = index">
                <td>{{ project.name }}</td>
                <td>{{ project.grade }}</td>
                <td>{{ project.weight }}%</td>
                <td>{{ getWeightedGrade(project) }}</td>
                <td>
                  <span class="edit-link" (click)="openEditAssessmentModal(project, 'Project', i)">Edit</span>
                  <span class="delete-link" (click)="openDeleteAssessmentModal(project, 'Project', i)">Delete</span>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <!-- Total for Quizzes -->
              <tr>
                <td colspan="3" style="text-align:right;">Total for Quizzes:</td>
                <td>{{ getTotalByType('Quiz') }}</td>
                <td></td>
              </tr>

              <!-- Total for Activities -->
              <tr>
                <td colspan="3" style="text-align:right;">Total for Activities:</td>
                <td>{{ getTotalByType('Activity') }}</td>
                <td></td>
              </tr>

              <!-- Total for Exams -->
              <tr>
                <td colspan="3" style="text-align:right;">Total for Exams:</td>
                <td>{{ getTotalByType('Exam') }}</td>
                <td></td>
              </tr>

              <!-- Total for Projects -->
              <tr>
                <td colspan="3" style="text-align:right;">Total for Projects:</td>
                <td>{{ getTotalByType('Project') }}</td>
                <td></td>
              </tr>

              <!-- Grand Total -->
              <tr>
                <td colspan="3" style="text-align:right; font-weight: bold;">Grand Total:</td>
                <td style="font-weight: bold;">{{ getGrandTotal() }}</td>
                <td></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
      <!-- other submenus here -->

    </ng-container>
    <div *ngIf="!selectedSubMenu && selectedMenu === 'home'">
      <div class="no-records">NO RECORDS FOUND</div>
    </div>
    <div *ngIf="!selectedSubMenu && !selectedMenu">
      <div class="no-records">NO RECORDS FOUND</div>
    </div>
  </div>
</div>

<!-- Add/Edit Assessment Modal -->
<div *ngIf="isAssessmentModalOpen" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeAssessmentModal()">&times;</span>
    <h2>{{ currentAssessmentType }} Assessment</h2>
    <form (ngSubmit)="isEditAssessmentModalOpen ? updateAssessment() : addAssessment()">
      <label for="assessmentName">Assessment Name:</label>
      <input id="assessmentName" [(ngModel)]="newAssessmentName" name="assessmentName" required />
      <label for="assessmentGrade">Grade:</label>
      <input id="assessmentGrade" type="number" [(ngModel)]="newAssessmentGrade" name="assessmentGrade" required />
      <label for="assessmentWeight">Weight (%):</label>
      <input id="assessmentWeight" type="number" [(ngModel)]="newAssessmentWeight" name="assessmentWeight" required />
      <button type="submit">{{ isEditAssessmentModalOpen ? 'Update Assessment' : 'Add Assessment' }}</button>
    </form>
  </div>
</div>

<!-- Delete Assessment Modal -->
<div *ngIf="isDeleteAssessmentModalOpen" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeDeleteAssessmentModal()">&times;</span>
    <p>Are you sure you want to delete this assessment?</p>
    <button (click)="confirmDeleteAssessment()">Yes</button>
    <button (click)="closeDeleteAssessmentModal()">No</button>
  </div>
</div>

 <!-- Account Menu -->
 <div *ngIf="selectedMenu === 'account'">
  <div class="account-info">
    <div class="profile-pic-edit">
      <img [src]="user.profilePic" alt="Profile Picture" class="profile-pic">
      <input type="file" (change)="onProfilePicChange($event)">
    </div>
    <div class="user-details">
      <p>Full Name: {{ user.name }}</p>
      <p>Email: {{ user.email }}</p>
    </div>