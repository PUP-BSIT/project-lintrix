<div class="header">
  <div class="logo">
    <img src="assets/logo_text.png" alt="GRADEMATE Logo">
  </div>  
  <div class="university-name">UNIVERSITY NAME</div>
  <div class="user-info">
    <span>{{ loggedInUsername }}</span>
  </div>
</div>
<div class="container">
  <div class="sidebar">
    <div class="dashboard-title">DASHBOARD</div>
    <div class="menu-item active" (click)="selectMenu('home')">
      <i class='bx bxs-home'></i> Home
    </div>
    <div class="menu-item" (click)="selectMenu('courses')">
      <i class='bx bxs-book-open'></i> Courses
    </div>
    <div class="menu-item" (click)="selectMenu('assessment')">
      <i class='bx bxs-book-alt'></i> Assessment
    </div>
    <div class="menu-item" (click)="selectMenu('input-grades')">
      <i class='bx bxs-edit'></i> Grade Entry
    </div>
    <div class="menu-item" (click)="selectMenu('account')">
      <i class='bx bxs-user'></i> Account
    </div>
    <div class="bottom-items">
      <div class="menu-item" (click)="selectMenu('darkmode')">
        <i class='bx bxs-moon'></i> Dark Mode
      </div>
      <div class="menu-item" (click)="selectMenu('logout')">
        <i class='bx bxs-exit'></i> Logout
      </div>
    </div>    
  </div>
<div class="content">
  <ng-container *ngIf="selectedMenu === 'courses'">
    <div *ngIf="isModalOpen" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeModal()">&times;</span>
        <form (submit)="addCourse()">
          <label for="courseName">Course Name:</label>
          <input id="courseName" [(ngModel)]="newCourseName" name="courseName" required />
          <button type="submit">Add Course</button>
        </form>
      </div>
    </div>
    <div *ngIf="isEditModalOpen" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeEditModal()">&times;</span>
        <form (submit)="updateCourse()">
          <label for="editCourseName">Edit Course Name:</label>
          <input id="editCourseName" [(ngModel)]="editCourseName" name="editCourseName" required />
          <button type="submit">Update Course</button>
        </form>
      </div>
    </div>
    <div *ngIf="isDeleteModalOpen" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeDeleteModal()">&times;</span>
        <p>Are you sure you want to delete this course?</p>
        <button (click)="confirmDelete()">Yes</button>
        <button (click)="closeDeleteModal()">No</button>
      </div>
    </div>
    <div *ngIf="isDeleteSelectedModalOpen" class="modal">
      <div class="modal-content">
        <span class="close" (click)="closeDeleteSelectedModal()">&times;</span>
        <p>Are you sure you want to delete the selected courses?</p>
        <button (click)="confirmDeleteSelected()">Yes</button>
        <button (click)="closeDeleteSelectedModal()">No</button>
      </div>
    </div>
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th class="course-header">
              <span>Course Name</span>
              <button class="styled-button" (click)="openDeleteSelectedModal()" [disabled]="!anyCourseSelected()">
                üóëÔ∏è Delete 
              </button>                    
            </th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="add-new-link" (click)="openModal()">Add New</span></td>
            <td></td>
          </tr>
          <tr *ngIf="courses.length > 0">
            <td>
              <input type="checkbox" (change)="toggleSelectAll($event)">
                Select All
            </td>
            <td></td>
          </tr>
          <tr *ngFor="let course of courses; let i = index">
            <td>
              <input type="checkbox" [(ngModel)]="selectedCourses[i]" (change)="checkSelectedCourses()">
                {{ course }}
            </td>
            <td [class.hidden-actions]="anyCourseSelected()">
              <span class="edit-link" (click)="openEditModal(course, i)">Edit</span>
              <span class="delete-link" (click)="openDeleteModal(i)">Delete</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </ng-container>

  <ng-container *ngIf="selectedMenu === 'assessment'">
    <!-- Dropdowns for Course and Assessment Type -->
    <div class="dropdown-container">
      <label for="courseDropdown">Course:</label>
      <select id="courseDropdown" [(ngModel)]="selectedCourse">
        <option *ngFor="let course of courses" [value]="course">{{ course }}</option>
      </select>
      <label for="assessmentDropdown">Assessment Type:</label>
      <select id="assessmentDropdown" [(ngModel)]="selectedAssessmentType">
        <option *ngFor="let type of assessmentTypes" [value]="type">{{ type }}</option>
      </select>
    </div>
  
    <!-- Assessments Section -->
    <div *ngIf="selectedAssessmentType === 'Quiz'" class="assessments-container">
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Assessment</th>
              <th>Grade</th>
              <th>Weight</th>
              <th>Total:</th>
              <th class="actions-column">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><button class="extravagant-button" (click)="addAssessment('Quiz')">Add Quiz</button></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr *ngFor="let quiz of getAssessmentsByType('Quiz'); let i = index; trackBy: trackByFn">
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Quiz', i, 'name', $event.target)" (keydown)="navigateCell($event)">{{ quiz.name }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Quiz', i, 'grade', $event.target)" (keydown)="navigateCell($event)">{{ quiz.grade }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Quiz', i, 'weight', $event.target)" (keydown)="navigateCell($event)">{{ quiz.weight }}%</td>
              <td>{{ getWeightedGrade(quiz) }}</td>
              <td>
                <button class="extravagant-button delete" (click)="deleteAssessment('Quiz', i)">Delete</button>
              </td>
            </tr>
            <tr>
              <td colspan="3" style="text-align:right;">Total for Quizzes:</td>
              <td>{{ getTotalByType('Quiz') }}</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div *ngIf="selectedAssessmentType === 'Activity'" class="assessments-container">
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Assessment</th>
              <th>Grade</th>
              <th>Weight</th>
              <th>Total:</th>
              <th class="actions-column">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><button class="extravagant-button" (click)="addAssessment('Activity')">Add Activity</button></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr *ngFor="let activity of getAssessmentsByType('Activity'); let i = index; trackBy: trackByFn">
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Activity', i, 'name', $event.target)" (keydown)="navigateCell($event)">{{ activity.name }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Activity', i, 'grade', $event.target)" (keydown)="navigateCell($event)">{{ activity.grade }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Activity', i, 'weight', $event.target)" (keydown)="navigateCell($event)">{{ activity.weight }}%</td>
              <td>{{ getWeightedGrade(activity) }}</td>
              <td>
                <button class="extravagant-button delete" (click)="deleteAssessment('Activity', i)">Delete</button>
              </td>
            </tr>
            <tr>
              <td colspan="3" style="text-align:right;">Total for Activities:</td>
              <td>{{ getTotalByType('Activity') }}</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div *ngIf="selectedAssessmentType === 'Exam'" class="assessments-container">
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Assessment</th>
              <th>Grade</th>
              <th>Weight</th>
              <th>Total:</th>
              <th class="actions-column">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><button class="extravagant-button" (click)="addAssessment('Exam')">Add Exam</button></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr *ngFor="let exam of getAssessmentsByType('Exam'); let i = index; trackBy: trackByFn">
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Exam', i, 'name', $event.target)" (keydown)="navigateCell($event)">{{ exam.name }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Exam', i, 'grade', $event.target)" (keydown)="navigateCell($event)">{{ exam.grade }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Exam', i, 'weight', $event.target)" (keydown)="navigateCell($event)">{{ exam.weight }}%</td>
              <td>{{ getWeightedGrade(exam) }}</td>
              <td>
                <button class="extravagant-button delete" (click)="deleteAssessment('Exam', i)">Delete</button>
              </td>
            </tr>
            <tr>
              <td colspan="3" style="text-align:right;">Total for Exams:</td>
              <td>{{ getTotalByType('Exam') }}</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div *ngIf="selectedAssessmentType === 'Project'" class="assessments-container">
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Assessment</th>
              <th>Grade</th>
              <th>Weight</th>
              <th>Total:</th>
              <th class="actions-column">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><button class="extravagant-button" (click)="addAssessment('Project')">Add Project</button></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr *ngFor="let project of getAssessmentsByType('Project'); let i = index; trackBy: trackByFn">
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Project', i, 'name', $event.target)" (keydown)="navigateCell($event)">{{ project.name }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Project', i, 'grade', $event.target)" (keydown)="navigateCell($event)">{{ project.grade }}</td>
              <td contenteditable="true" tabindex="0" (blur)="updateAssessment('Project', i, 'weight', $event.target)" (keydown)="navigateCell($event)">{{ project.weight }}%</td>
              <td>{{ getWeightedGrade(project) }}</td>
              <td>
                <button class="extravagant-button delete" (click)="deleteAssessment('Project', i)">Delete</button>
              </td>
            </tr>
            <tr>
              <td colspan="3" style="text-align:right;">Total for Projects:</td>
              <td>{{ getTotalByType('Project') }}</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</ng-container>